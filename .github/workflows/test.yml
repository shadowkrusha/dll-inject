name: Test Build

on:
    pull_request: 
        branches:
            - main
            - staging
    workflow_dispatch: 

jobs:
    test:
        runs-on: windows-latest

        steps:
            - name: Checkout Repository
              uses: actions/checkout@v4

            - name: Setup Node.js 18.x
              uses: actions/setup-node@v4
              with:
                node-version: "18.x"
                registry-url: 'https://registry.npmjs.org'
                cache: 'npm'

            - name: Install Dependencies
              run: |
                npm install
              working-directory: ${{ github.workspace }}

            - name: Run Build
              run: |
                npm run prebuild
